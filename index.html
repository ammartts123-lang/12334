<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Arfa üíò Valentine Lunch</title>

  <style>
    :root{
      --bg1:#0f1020; --bg2:#1a1033;
      --card:#ffffff10; --txt:#fff;
      --pink:#ff4d8d; --pink2:#ff7ab3;
      --muted:#ffffffb3; --line:#ffffff20;

      /* Background photo (set via JS) */
      --photo-url: none;
      --photo-opacity: .28;
      --photo-blur: 10px;
      --photo-scale: 1.08;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      min-height:100vh;
      color:var(--txt);
      background:
        radial-gradient(1200px 700px at 20% 10%, #3b1a5a 0%, transparent 55%),
        radial-gradient(900px 600px at 80% 30%, #7a1746 0%, transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      overflow:hidden;
      position:relative;
    }

    /* Photo layer */
    body::before{
      content:"";
      position:fixed;
      inset:-40px;
      background-image: var(--photo-url);
      background-size: cover;
      background-position: center;
      transform: scale(var(--photo-scale));
      filter: blur(var(--photo-blur));
      opacity: var(--photo-opacity);
      transition: opacity 600ms ease, filter 600ms ease;
      z-index:-2;
    }

    /* Dark overlay for readability */
    body::after{
      content:"";
      position:fixed;
      inset:0;
      background: linear-gradient(180deg, #00000055, #00000070);
      z-index:-1;
    }

    .wrap{width:min(920px,100%); display:grid; gap:18px}
    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:24px;
      padding:28px;
      box-shadow: 0 20px 60px #00000055;
      backdrop-filter: blur(10px);
    }

    .hero{display:grid; gap:10px; text-align:center}
    h1{margin:0; font-size: clamp(34px, 5vw, 56px); letter-spacing:-0.02em}
    p{margin:0; color:var(--muted); font-size: clamp(14px, 2vw, 18px); line-height:1.4}

    .buttons{
      margin-top:14px;
      display:flex;
      gap:12px;
      justify-content:center;
      flex-wrap:wrap;
      position:relative;
      min-height:56px;
    }

    button{
      border:0;
      cursor:pointer;
      padding:14px 18px;
      border-radius:16px;
      font-size:16px;
      font-weight:800;
      transition: transform .15s ease;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    button:hover{transform: translateY(-1px)}

    #yes{
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      color:#210011
    }

    #no{
      background:#ffffff14;
      color:var(--txt);
      border:1px solid #ffffff2a;
      position:relative;
    }

    .hint{opacity:.9; font-size:13px; color:var(--muted); margin-top:6px}

    .locked{
      display:grid;
      gap:12px;
      place-items:center;
      text-align:center;
      min-height:190px;
      border-radius:18px;
      border:1px dashed #ffffff30;
      background:#00000018;
      padding:18px;
    }

    .big{font-size:22px; font-weight:900}
    .small{color:var(--muted); font-size:14px}

    .reveal{display:none; width:100%; text-align:left;}

    .row{
      display:flex; justify-content:space-between; gap:12px;
      padding:10px 12px;
      border-radius:14px;
      background:#ffffff0f;
      border:1px solid #ffffff18;
      margin-bottom:10px;
    }

    .venues{display:grid; gap:10px; margin-top:12px}

    .venue{
      width:100%;
      text-align:left;
      background:#ffffff10;
      border:1px solid #ffffff22;
      color:#fff;
      padding:14px 14px;
      border-radius:16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .venue span{color:var(--muted); font-weight:700; font-size:13px}
    .venue:focus{outline:2px solid #ff7ab355; outline-offset:2px}

    .final{
      display:none;
      margin-top:12px;
      padding:14px;
      border-radius:16px;
      background:linear-gradient(135deg, #ff4d8d20, #ffffff10);
      border:1px solid #ffffff22;
    }
    .final b{color:#fff}

    .toast{
      position:fixed;
      bottom:18px;
      left:50%;
      transform:translateX(-50%);
      background:#111;
      color:#fff;
      padding:10px 14px;
      border-radius:999px;
      border:1px solid #ffffff20;
      display:none;
      gap:10px;
      align-items:center;
      max-width:min(560px,92vw);
      z-index:80;
    }

    /* Layers */
    canvas{position:fixed; inset:0; pointer-events:none; z-index:10}
    #flowers{position:fixed; inset:0; pointer-events:none; z-index:20; overflow:hidden}
    #compliments{position:fixed; inset:0; pointer-events:none; z-index:30; overflow:hidden}

    /* Flowers */
    .flower{
      position:absolute;
      top:-12vh;
      will-change: transform, opacity;
      animation-name: fall;
      animation-timing-function: linear;
      animation-iteration-count: 1;
      opacity: .95;
      filter: drop-shadow(0 6px 12px #00000066);
      user-select:none;
    }
    @keyframes fall{
      0%   { transform: translate3d(0, -15vh, 0) rotate(0deg); }
      100% { transform: translate3d(var(--dx), 115vh, 0) rotate(var(--rot)); }
    }

    /* Compliments */
    .compliment{
      position:absolute;
      bottom:-14vh;
      padding:10px 14px;
      border-radius:999px;
      border:1px solid #ffffff2a;
      background: linear-gradient(135deg, #ff4d8d22, #ffffff10);
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 50px #00000055;
      color:#fff;
      font-weight:900;
      letter-spacing:-0.01em;
      white-space:nowrap;
      user-select:none;
      will-change: transform, opacity;
      animation-name: rise;
      animation-timing-function: linear;
      animation-iteration-count: 1;
      opacity: .98;
      max-width: 88vw;
      overflow:hidden;
      text-overflow: ellipsis;
    }
    .compliment small{
      display:block;
      font-weight:700;
      color:var(--muted);
      margin-top:2px;
      letter-spacing:0;
    }
    @keyframes rise{
      0%   { transform: translate3d(0, 10vh, 0) rotate(0deg); opacity:0; }
      10%  { opacity: .98; }
      100% { transform: translate3d(var(--dx), -120vh, 0) rotate(var(--rot)); opacity:0; }
    }
  </style>
</head>

<body>
  <canvas id="confetti"></canvas>
  <div id="flowers"></div>
  <div id="compliments"></div>

  <div class="wrap">
    <div class="card hero">
      <h1>Arfa, will you be my Valentine? üíò</h1>
      <p>
        Valentine lunch invitation, delivered digitally.<br/>
        One click and I officially reserve you for lunch (with extra dessert rights).
      </p>

      <div class="buttons">
        <button id="yes" aria-label="Yes">Yes üíñ</button>
        <button id="no" aria-label="No">No üôÉ</button>
      </div>
      <div class="hint">P.S. The ‚ÄúNo‚Äù button is‚Ä¶ emotionally unavailable.</div>
    </div>

    <div class="card">
      <div class="locked">
        <div class="big" id="lockTitle">Valentine Lunch Plan üîí</div>
        <div class="small" id="lockSub">Unlock by clicking ‚ÄúYes‚Äù. (No negotiations. Only love.)</div>

        <div class="reveal" id="reveal">
          <div class="row"><div><b>Occasion</b></div><div>Valentine Lunch üíò</div></div>
          <div class="row"><div><b>Rule</b></div><div>You choose the venue üòå</div></div>

          <div style="margin-top:8px; font-weight:900; font-size:16px;">Pick our lunch spot:</div>
          <div class="venues">
            <button class="venue" data-place="Tehzeeb">Tehzeeb <span>üßÅ sweet & cozy</span></button>
            <button class="venue" data-place="Let‚Äôs Cafe">Let‚Äôs Cafe <span>‚òï chill vibes</span></button>
            <button class="venue" data-place="Wali Shinwari">Wali Shinwari <span>üçΩÔ∏è proper feast</span></button>
          </div>

          <div class="final" id="final">
            <div style="font-size:18px; font-weight:900;">Done ‚úÖ</div>
            <div style="margin-top:6px;">
              Arfa has chosen: <b id="chosen"></b><br/>
              Your Valentine will handle the rest. You just show up and look adorable ‚ú®
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast">üí¨ <span id="toastText"></span></div>

<script>
  // =========================
  // 1) PHOTO (GitHub Pages)
  // Put "us.jpg" in the same repo folder as index.html
  // =========================
  var PHOTO_URL = "Us.JPG";
  if (PHOTO_URL) {
    document.documentElement.style.setProperty("--photo-url", "url('" + PHOTO_URL + "')");
  }

  // =========================
  // Helpers
  // =========================
  function rand(min, max){ return Math.random() * (max - min) + min; }
  function clamp(v, a, b){ return Math.max(a, Math.min(b, v)); }
  function escapeHtml(str){
    return String(str)
      .replace(/&/g,"&amp;")
      .replace(/</g,"&lt;")
      .replace(/>/g,"&gt;")
      .replace(/"/g,"&quot;")
      .replace(/'/g,"&#039;");
  }

  // Toast
  var toast = document.getElementById('toast');
  var toastText = document.getElementById('toastText');
  function showToast(msg){
    toastText.textContent = msg;
    toast.style.display = 'flex';
    clearTimeout(showToast.t);
    showToast.t = setTimeout(function(){ toast.style.display='none'; }, 1600);
  }

  // =========================
  // 2) NO BUTTON (dodges >= 3)
  // =========================
  var noBtn = document.getElementById('no');
  var dodgeCount = 0;
  var noLines = [
    "Nice try üòå",
    "That button is decorative.",
    "My heart says: denied üíò",
    "Plot twist: you meant YES.",
    "I consulted destiny. It said YES.",
    "This click has been respectfully rejected."
  ];

  function dodgeNo(){
    dodgeCount++;

    var pad = 16;
    var rect = noBtn.getBoundingClientRect();
    var vw = window.innerWidth, vh = window.innerHeight;

    // Avoid landing on top of the Yes button area (simple safe zone)
    var safeTop = 80; // keep it away from very top
    var x = Math.max(pad, Math.min(vw - rect.width - pad, Math.random() * (vw - rect.width)));
    var y = Math.max(safeTop, Math.min(vh - rect.height - pad, Math.random() * (vh - rect.height)));

    noBtn.style.position = "fixed";
    noBtn.style.left = x + "px";
    noBtn.style.top  = y + "px";

    if (dodgeCount === 3) showToast("Okay okay‚Ä¶ three times. Still no üòå");
    else showToast(noLines[Math.floor(Math.random() * noLines.length)]);
  }

  // Desktop hover + click
  noBtn.addEventListener('mouseenter', dodgeNo);
  noBtn.addEventListener('click', function(e){ e.preventDefault(); dodgeNo(); });

  // Mobile tap
  noBtn.addEventListener('touchstart', function(e){
    e.preventDefault();
    dodgeNo();
  }, { passive:false });

  // =========================
  // 3) FLOWERS
  // =========================
  var flowerLayer = document.getElementById("flowers");
  var FLOWERS = ["üå∏","üå∑","üå∫","üíê","üåπ","üåº"];
  var flowerInterval = null;

  function spawnFlower(){
    if (!flowerLayer) return;

    var el = document.createElement("span");
    el.className = "flower";
    el.textContent = FLOWERS[Math.floor(Math.random() * FLOWERS.length)];

    var size = rand(18, 42);
    var startX = rand(0, 100);
    var endX   = clamp(startX + rand(-14, 14), 0, 100);
    var dx     = (endX - startX) + "vw";

    var duration = rand(4500, 9500);
    var delay    = rand(0, 800);
    var rot      = rand(-720, 720) + "deg";
    var opacity  = rand(0.65, 1);

    el.style.left = startX + "vw";
    el.style.fontSize = size + "px";
    el.style.opacity = opacity;
    el.style.setProperty("--dx", dx);
    el.style.setProperty("--rot", rot);
    el.style.animationDuration = duration + "ms";
    el.style.animationDelay = delay + "ms";

    flowerLayer.appendChild(el);
    setTimeout(function(){ el.remove(); }, duration + delay + 300);
  }

  function startFlowerShower(runForMs){
    if (!flowerLayer) return;

    // clear any previous run
    if (flowerInterval) clearInterval(flowerInterval);

    // burst
    for (var i=0; i<90; i++) spawnFlower();

    // continuous
    flowerInterval = setInterval(function(){
      for (var j=0; j<6; j++) spawnFlower();
    }, 220);

    setTimeout(function(){
      if (flowerInterval) clearInterval(flowerInterval);
      flowerInterval = null;
    }, runForMs || 9000);
  }

  // =========================
  // 4) COMPLIMENTS
  // =========================
  var complimentLayer = document.getElementById("compliments");
  var complimentInterval = null;

  var COMPLIMENTS = [
    { t: "Arfa, you‚Äôre breathtaking ‚ú®", s: "Your beauty honestly stops me." },
    { t: "Your kindness is my peace ü§ç", s: "You make everything feel softer." },
    { t: "Your love for me is priceless üíñ", s: "I feel lucky every single day." },
    { t: "Your sincerity is beautiful üå∑", s: "Real, pure, and rare." },
    { t: "You make my world brighter üåü", s: "Even on the hardest days." },
    { t: "My favorite view is you üòç", s: "Especially when you smile." },
    { t: "I adore your heart üíê", s: "The way you care is unmatched." }
  ];

  function spawnCompliment(){
    if (!complimentLayer) return;

    var item = COMPLIMENTS[Math.floor(Math.random() * COMPLIMENTS.length)];
    var el = document.createElement("div");
    el.className = "compliment";
    el.innerHTML = escapeHtml(item.t) + "<small>" + escapeHtml(item.s) + "</small>";

    var startX = rand(4, 86);
    var endX   = clamp(startX + rand(-10, 10), 2, 88);
    var dx     = (endX - startX) + "vw";

    var duration = rand(5200, 9800);
    var delay    = rand(0, 900);
    var rot      = rand(-8, 8) + "deg";
    var fontSize = rand(13, 18);

    el.style.left = startX + "vw";
    el.style.fontSize = fontSize + "px";
    el.style.setProperty("--dx", dx);
    el.style.setProperty("--rot", rot);
    el.style.animationDuration = duration + "ms";
    el.style.animationDelay = delay + "ms";

    complimentLayer.appendChild(el);
    setTimeout(function(){ el.remove(); }, duration + delay + 300);
  }

  function startCompliments(runForMs){
    if (!complimentLayer) return;

    if (complimentInterval) clearInterval(complimentInterval);

    // burst
    for (var i=0; i<10; i++) spawnCompliment();

    complimentInterval = setInterval(function(){
      spawnCompliment();
      if (Math.random() > 0.55) spawnCompliment();
    }, 520);

    setTimeout(function(){
      if (complimentInterval) clearInterval(complimentInterval);
      complimentInterval = null;
    }, runForMs || 9000);
  }

  // =========================
  // 5) HEART CONFETTI
  // =========================
  var canvas = document.getElementById('confetti');
  var ctx = canvas.getContext('2d');
  var W=0, H=0, parts=[];

  function resize(){
    W = canvas.width = window.innerWidth;
    H = canvas.height = window.innerHeight;
  }
  window.addEventListener('resize', resize);
  resize();

  function heartPath(s){
    ctx.beginPath();
    ctx.moveTo(0, 0);
    ctx.bezierCurveTo(0, -s*0.5, -s, -s*0.1, -s, s*0.4);
    ctx.bezierCurveTo(-s, s, 0, s*1.1, 0, s*1.4);
    ctx.bezierCurveTo(0, s*1.1, s, s, s, s*0.4);
    ctx.bezierCurveTo(s, -s*0.1, 0, -s*0.5, 0, 0);
    ctx.closePath();
  }

  function confettiBurst(count){
    count = count || 140;
    parts = [];
    for (var i=0; i<count; i++){
      parts.push({
        x: W/2 + (Math.random()-0.5)*120,
        y: H/2 + (Math.random()-0.5)*60,
        vx: (Math.random()-0.5)*8,
        vy: (Math.random()-1.2)*9,
        g: 0.18 + Math.random()*0.1,
        s: 6 + Math.random()*8,
        r: Math.random()*Math.PI,
        vr: (Math.random()-0.5)*0.2,
        a: 1
      });
    }
    requestAnimationFrame(tick);
  }

  function tick(){
    ctx.clearRect(0,0,W,H);
    var alive = 0;
    for (var i=0; i<parts.length; i++){
      var p = parts[i];
      p.vy += p.g;
      p.x += p.vx;
      p.y += p.vy;
      p.r += p.vr;
      p.a *= 0.985;

      if (p.a > 0.03 && p.y < H + 50){
        alive++;
        ctx.save();
        ctx.globalAlpha = p.a;
        ctx.translate(p.x, p.y);
        ctx.rotate(p.r);
        ctx.fillStyle = "rgba(255,77,141,0.95)";
        heartPath(p.s);
        ctx.fill();
        ctx.restore();
      }
    }
    if (alive) requestAnimationFrame(tick);
  }

  // =========================
  // 6) YES CLICK + VENUE PICK
  // =========================
  var yesBtn = document.getElementById('yes');
  var reveal = document.getElementById('reveal');
  var lockTitle = document.getElementById('lockTitle');
  var lockSub = document.getElementById('lockSub');
  var finalBox = document.getElementById('final');
  var chosen = document.getElementById('chosen');

  yesBtn.addEventListener('click', function(){
    lockTitle.textContent = "Valentine Lunch Plan ‚úÖ Unlocked";
    lockSub.textContent = "Alright then‚Ä¶ let‚Äôs make it official üòç";
    reveal.style.display = "block";

    // make background photo slightly more visible after YES
    document.documentElement.style.setProperty("--photo-opacity", ".42");
    document.documentElement.style.setProperty("--photo-blur", "8px");

    showToast("YAY! Best answer ever üíñ");
    confettiBurst(160);
    startFlowerShower(10000);
    startCompliments(10000);
  });

  var venueButtons = document.querySelectorAll('.venue');
  for (var i=0; i<venueButtons.length; i++){
    venueButtons[i].addEventListener('click', function(){
      var place = this.getAttribute('data-place');
      chosen.textContent = place;
      finalBox.style.display = "block";

      showToast("Locked in: " + place + " ‚úÖ");
      confettiBurst(110);
      startFlowerShower(5000);
      startCompliments(5000);
    });
  }
</script>
</body>
</html>
